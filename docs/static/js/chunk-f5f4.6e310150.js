(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f5f4"],{"2ab0":function(t,e,a){"use strict";var l=a("da73"),o=a.n(l);o.a},da73:function(t,e,a){},f5a7:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中..."}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:"","label-width":"80px"}},[a("el-form-item",{attrs:{label:"应用名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入应用名称进行搜索",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-button",{on:{click:t.searchTable}},[t._v("搜索")])],1),a("el-button-group",{staticClass:"mb10"},[a("el-button",{attrs:{icon:"iconfont icon-add",type:"primary"},on:{click:t.openDialog}}),a("el-button",{attrs:{icon:"iconfont icon-ban",type:"danger",disabled:0===t.multipleSelection.length},on:{click:t.delData}}),a("el-button",{attrs:{icon:"iconfont icon-audit",type:"success",disabled:0===t.multipleSelection.length},on:{click:t.enableData}})],1),a("el-table",{ref:"multipleTable",attrs:{data:t.listData,border:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"platformName",label:"应用名称"}}),a("el-table-column",{attrs:{prop:"platformKey",label:"KEY"}}),a("el-table-column",{attrs:{prop:"createTime",label:"操作时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t._f("dateFormat")(e.row.createTime,"yyyy-MM-dd")))])]}}])}),a("el-table-column",{attrs:{prop:"valid",label:"状态",filters:[{text:"启用",value:!0},{text:"禁用",value:!1}],"filter-method":t.filterHandler,"filter-placement":"bottom-start"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.valid?"启用":"禁用"))]}}])}),a("el-table-column",{attrs:{label:"操作",resizable:!1,width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{icon:"iconfont icon-edit",type:"primary"},on:{click:function(a){t.cellEdit(e.row)}}}),e.row.valid?a("el-button",{attrs:{icon:"iconfont icon-ban",type:"danger"},on:{click:function(a){t.cellDelete(e.row)}}}):a("el-button",{attrs:{icon:"iconfont icon-audit",type:"success"},on:{click:function(a){t.cellEnable(e.row)}}})],1)]}}])})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],attrs:{"current-page":t.pageNum,"page-sizes":t.pageSizes,"page-size":t.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageCurrentChange}}),a("el-dialog",{attrs:{title:t.opType,visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{label:"应用名称",prop:"platformName"}},[a("el-input",{attrs:{placeholder:"请输入应用名称",clearable:""},model:{value:t.formData.platformName,callback:function(e){t.$set(t.formData,"platformName",e)},expression:"formData.platformName"}})],1),a("el-form-item",{attrs:{label:"KEY",prop:"platformKey"}},[a("el-input",{attrs:{placeholder:"请输入应用的 KEY",clearable:""},model:{value:t.formData.platformKey,callback:function(e){t.$set(t.formData,"platformKey",e)},expression:"formData.platformKey"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitData("formData")}}},[t._v("确 定")])],1)],1)],1)},o=[],n=(a("6c7b"),a("c93e")),i={data:function(){return{form:{valid:!0},currentRow:null,loading:!1,pageNum:1,pages:0,pageSize:10,pageSizes:[10,20,30,50],listData:[],total:0,multipleSelection:[],dialogVisible:!1,opType:"添加",formData:{},rules:{platformName:[{required:!0,message:"请输入应用名称",trigger:"blur"}],platformKey:[{required:!0,message:"请输入应用 KEY",trigger:"blur"}]}}},computed:{showPage:function(){return this.pages>=1}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;Object(n["a"])({pageNum:this.pageNum,pageSize:this.pageSize},this.form);this.$refs["multipleTable"].clearFilter(),this.loading=!0,setTimeout(function(){t.listData=Array(7).fill({}).map(function(t){return{}}),t.loading=!1,t.pages=7,t.total=77},800)},searchTable:function(){this.loadData()},pageSizeChange:function(t){this.pageSize=t,this.loadData()},pageCurrentChange:function(t){this.pageNum=t,this.loadData()},handleSelectionChange:function(t){this.multipleSelection=t},filterHandler:function(t,e,a){return e.valid===t},cellEdit:function(t){this.opType="修改",this.formData={platformName:t.platformName,platformKey:t.platformKey,platformId:t.platformId},this.dialogVisible=!0},cellDelete:function(t){var e=this;this.$confirm("确定禁用本条数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){delPlatform(t.platformId).then(function(t){e.$message.success("操作成功"),e.loadData(),e.$store.dispatch("fetchValidPlatforms",!0)})}).catch(function(){e.$message("已取消操作")})},cellEnable:function(t){var e=this;this.$confirm("确定启用本条数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){enablePlatform(t.platformId).then(function(t){e.$message.success("操作成功"),e.loadData(),e.$store.dispatch("fetchValidPlatforms",!0)})}).catch(function(){e.$message("已取消操作")})},openDialog:function(){this.opType="添加",this.formData={},this.dialogVisible=!0},submitData:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$confirm("确定提交当前数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"修改"===e.opType?editPlatform(e.formData).then(function(t){e.$message.success("修改成功"),e.dialogVisible=!1,e.loadData(),e.$store.dispatch("fetchValidPlatforms",!0)}):addPlatform(e.formData).then(function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.loadData(),e.$store.dispatch("fetchValidPlatforms",!0)})}).catch(function(){e.$message("已取消操作")})})},delData:function(){var t=this;this.multipleSelection.length<1?this.$message.warning("请选择后再进行操作"):this.$confirm("确定禁用当前选中的数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){batchDelPlatforms(t.multipleSelection.map(function(t){return t.platformId})).then(function(e){t.$message.success("操作成功"),t.loadData(),t.$store.dispatch("fetchValidPlatforms",!0)})}).catch(function(){t.$message("已取消操作")})},enableData:function(){var t=this;this.multipleSelection.length<1?this.$message.warning("请选择后再进行操作"):this.$confirm("确定启用当前选中的数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){batchEnablePlatforms(t.multipleSelection.map(function(t){return t.platformId})).then(function(e){t.$message.success("操作成功"),t.loadData(),t.$store.dispatch("fetchValidPlatforms",!0)})}).catch(function(){t.$message("已取消操作")})}}},r=i,s=(a("2ab0"),a("2877")),c=Object(s["a"])(r,l,o,!1,null,null,null);c.options.__file="platform.vue";e["default"]=c.exports}}]);